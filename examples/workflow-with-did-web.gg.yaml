# GenesisGraph Example: Manufacturing Workflow with did:web Identities
#
# This example demonstrates using did:web for organization-level identities
# in an aerospace manufacturing workflow.

version: 0.1
profile: gg-cam-v1

inputs:
  - id: bracket_cad@1
    digest: sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
    tool:
      did: did:web:cad-software.example.com:products:fusion360
      name: Autodesk Fusion 360
      version: 2.0.15234
    attestation:
      signer: did:web:aerospace.example.com:engineering:john_smith
      signature: ed25519:sig_MEUCIQDxyz123...
      timestamp: '2025-10-14T10:00:00Z'

operations:
  - id: op_cam_toolpath_generation
    tool:
      did: did:web:aerospace.example.com:systems:cam-phoenix
      name: Proprietary CAM System
      version: 5.2.1
    inputs:
      - bracket_cad@1
    outputs:
      - id: gcode_rough@1
        digest: sha256:5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5f6a
    attestation:
      signer: did:web:aerospace.example.com:systems:cam-phoenix
      signature: ed25519:sig_CAMSystem123...
      timestamp: '2025-10-14T11:30:00Z'
      delegation: did:web:aerospace.example.com

  - id: op_quality_inspection
    tool:
      name: CMM Inspection
      version: 3.1.0
      did: did:web:aerospace.example.com:equipment:cmm-station-2
    inputs:
      - gcode_rough@1
    outputs:
      - id: inspection_report@1
        digest: sha256:9e8d7c6b5a4f3e2d1c0b9a8f7e6d5c4b3a2f1e0d9c8b7a6f5e4d3c2b1a0f9e8d
    attestation:
      signer: did:web:aerospace.example.com:qc:inspector_johnson
      signature: ed25519:sig_Inspector456...
      timestamp: '2025-10-14T14:00:00Z'
      claims:
        policy: gg-cam-v1
        results:
          - dimension_tolerance: pass
          - surface_finish: pass
          - material_verification: pass
      multisig:
        threshold: 2
        signers:
          - did:web:aerospace.example.com:qc:inspector_johnson
          - did:web:aerospace.example.com:qc:supervisor_williams

  - id: op_compliance_certification
    tool:
      name: AS9100D Compliance Checker
      version: 2.1.0
    inputs:
      - inspection_report@1
    outputs:
      - id: compliance_cert@1
        digest: sha256:1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b
    attestation:
      signer: did:web:aerospace.example.com:compliance:system
      signature: ed25519:sig_Compliance789...
      timestamp: '2025-10-14T15:30:00Z'
      claims:
        policy: iso-9001-2015
        results:
          - traceability: pass
          - documentation: pass
          - process_control: pass
      transparency:
        - log_id: did:web:transparency.aerospace-industry.org:logs:manufacturing
          entry_id: '0x5f2c8a91'
          tree_size: 428934
          inclusion_proof: YmFzZTY0X2VuY29kZWRfcHJvb2ZfZGF0YQ==

outputs:
  - compliance_cert@1
